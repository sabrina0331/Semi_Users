<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Create</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $('#username').keyup(function(){
                var data = $("#regForm").serialize()   // capture all the data in the form in the variable data
                $.ajax({
                    method: "POST",   // we are using a post request here, but this could also be done with a get
                    url: "/username",
                    data: data
                })
                .done(function(res){
                    $('#usernameMsg').html(res)  // manipulate the dom when the response comes back
                })
            })
        })
    </script>

    <style>
        body{
            margin-left: 50px;
            margin-top: 50px;
        }
            input[type=text] {
              width: 30%;
              margin: 8px 0;
              display: inline-block;
              border: 1px solid #ccc;
              border-radius: 4px;
              box-sizing: border-box;
            }
            
            input[type=submit] {
              width: 50%;
              background-color: #4CAF50;
              color: white;
              padding: 14px 20px;
              margin: 8px 0;
              border: none;
              border-radius: 4px;
              cursor: pointer;
            }
            
            input[type=submit]:hover {
              background-color: #45a049;
            }
            
            #body {
              border-radius: 5px;
              padding: 20px;
            }
            #head{
                display: inline-block;
                text-align: top;
            }
            a{
                margin-left: 500px;
            }
            h3{
                margin-left: 25px;
            }
            button {
                border: 1px solid;
                padding: 10px;
                box-shadow: 5px 10px 8px gold;
            }
            </style>
</head>
<body>
    <div id="head">
        <h3>Add a New User            <a href="/users">Home</a> </h3>  
    </div>
    <div id="body">
    <form action="/process" method="POST" id="regForm">
        <h4>First Name:</h4><br>
        <div id="usernameMsg"></div>
        <input id="username" type="text" name="fname">
        <h4>Last Name:</h4><br>
        <input type="text" name="lname">
        <h4>Email:</h4><br>
        <input  type="text" name="email"><br>
        <button type="submit">Create</button>
    </form>
    </div>
</body>
</html>